@{
    ViewBag.Title = "Watcher";
}

<h1>Welcome to Watcher!</h1>

<div class="row">
    <div class="col-md-4">
        <input type="text" class="form-control" id="search" placeholder="Search..">
        
        <br/>
        <div style="margin-top: 10px; margin-bottom: 10px;">
            <ul id="searchList"></ul>
        </div>
        
        <h2>Airing Today</h2>
        <div style="margin-top: 10px; margin-bottom: 10px;">
            <ul id="airToday"></ul>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            dataType: "json",
            type: 'POST',
            url: '@Url.Action("AiringToday", "Home")',
            success: airingToday,
        });
    });

    $('#search').on('input', function() {
        if ($('#search').val().length > 0) {
            $.ajax({
                dataType: "json",
                type: 'POST',
                url: '@Url.Action("Search", "Home")',
                data: {
                    input: $('#search').val()
                },
                success: updateView,
            });
        }
    });

    function airingToday(data) {
        $('#airToday').empty();

        for (var i = 0; i < data.shows.length; i++) {
            $('#showList').append('<li>+ ' + data.shows[i].Name + '</li>');
        }
    }

    function updateView(data) {
        $('#searchList').empty();

        for (var i = 0; i < data.shows.length; i++) {
            $('#searchList').append('<li>+ ' + data.shows[i].Name + '</li>');
        }
    }
</script>